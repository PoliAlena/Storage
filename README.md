# Storage МойСклад

## Описание проекта

Это WPF-приложение для управления и отображения паллет и коробок на складе. Основные возможности:

- Загрузка данных из локального JSON-файла
- Отображение списка паллет и вложенных в них коробок
- Сортировка и группировка паллет по сроку годности и объему
- Отдельный блок с топ-3 паллетами с максимальным сроком годности, отсортированными по объему
- Архитектура MVVM для чистого разделения логики и представления

---

## Структура данных и модель предметной области

### Базовый класс StorageItem

StorageItem — абстрактный базовый класс, определяющий основные свойства для складских объектов (паллет и коробок):

- ID — уникальный идентификатор (`Guid`), автоматически генерируется при создании
- Width, Height, Depth — габаритные размеры (в метрах, сантиметрах или другой единице)
- Weight — вес объекта (виртуальное, может быть переопределено)
- Volume — вычисляемое свойство, рассчитывающее объем как произведение трех измерений, округленное до 2 знаков

### Класс Box (Коробка)

Наследует StorageItem, добавляет:

- ProductionDate — дата производства (может быть null)
- ExpirationDate — срок годности. Если явно не задан и есть дата производства, то считается как ProductionDate + 100 дней
- FormattedExpiration — форматированная строка срока годности (дд.мм.гггг), либо "Без срока", если дата отсутствует
Вес, объём и другие базовые параметры наследуются от StorageItem. Вес может быть установлен индивидуально для каждой коробки.

Также реализован метод:
 - IsItFitsPalletSize(Pallet pallet) — возвращает true, если коробка помещается по ширине и глубине на заданную паллету

### Класс Pallet (Паллета)

Наследует StorageItem, добавляет:

 - Boxes — список коробок (List<Box>), размещённых на паллете
 - ExpirationDate — минимальный срок годности среди всех коробок на паллете. Если коробок нет или у всех отсутствует дата — null
 - Weight — переопределяет базовое свойство: сумма веса всех коробок плюс фиксированный вес паллеты (30 кг)
 - TotalPalletVolume — общий объём паллеты, включает собственный объём и суммарный объём всех коробок
 - FormattedExpiration — строковое представление срока годности паллеты в формате дд.мм.гггг, либо "Без срока", если не задано
Паллета автоматически пересчитывает срок годности и вес при изменении списка коробок. Объём округляется до двух знаков.
---

## Хранение и загрузка данных

Данные хранятся в локальном JSON-файле:
Формат JSON соответствует структуре объектов Pallet и вложенных Box.
Данные загружаются и десериализуются в классе DataService

Пример файла:

```json
[
  {
    "Width": 1.2,
    "Height": 1.0,
    "Depth": 0.8,
    "Boxes": [
      {
        "Width": 0.2,
        "Height": 0.3,
        "Depth": 0.1,
        "Weight": 5,
        "ExpirationDate": "2025-12-01"
      },
      {
        "Width": 70,
        "Height": 40,
        "Depth": 50,
        "Weight": 10,
        "ProductionDate": "2025-04-01"
      }
    ]
  }
]
```
---
## Логика приложения
 - При запуске загружаются паллеты с коробками из JSON
 - Отображение списка паллет с возможностью группировки по сроку годности
 - Выделение топ-3 паллет с максимальным сроком годности и сортировка по объему
 - MVVM: представление связывается с PalletsListViewModel, где происходит сортировка, группировка и подготовка данных
---
##  Unit-тестирование
В проекте реализованы модульные тесты с использованием фреймворка xUnit.  
Тесты размещены в отдельном проекте Storage.Tests, который подключён к основному через ссылку на проект.

###  Что проверяется:
- Расчёт объема и веса паллет
- Корректное определение минимального срока годности паллеты
- Формирование топ-3 паллет с максимальными сроками годности
- Обработка пустых или некорректных данных

###  Как запустить тесты:
#### Через Visual Studio:
1. Открой окно Test Explorer (меню **Test → Test Explorer**)
2. Нажми Run All Tests
